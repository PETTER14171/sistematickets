(()=>{"use strict";function e(){const e=document.getElementById("modalNotificaciones"),n=document.getElementById("contenidoNotificaciones");e&&n&&(e.style.display="flex",fetch("notificaciones.php").then(e=>e.text()).then(e=>{n.innerHTML=e}).catch(e=>{n.innerHTML="<p>Error al cargar las notificaciones.</p>",console.error(e)}))}function n(){const e=document.getElementById("alertaDinamica");e&&fetch("notificaciones_alerta.php").then(e=>e.json()).then(n=>{Array.isArray(n)&&n.length>0?e.innerHTML=n.map(e=>{return n=e.mensaje,`\n      <div style="\n        background-color: ${{alta:"#f8d7da",media:"#fff3cd",baja:"#d1ecf1"}[t=e.prioridad]||"#e2e3e5"};\n        color: #000;\n        padding: 12px;\n        border-left: 5px solid ${{alta:"#dc3545",media:"#ffc107",baja:"#17a2b8"}[t]||"#6c757d"};\n        margin-bottom: 20px;\n        border-radius: 4px;\n        animation: parpadeo ${"alta"===t?"2s":"media"===t?"6s":"10s"} infinite;\n      ">\n        ⚠️ ${n} (${t?t.charAt(0).toUpperCase()+t.slice(1):"Info"})\n      </div>\n    `;var n,t}).join(""):e.innerHTML=""}).catch(e=>console.error("Error al consultar notificaciones:",e))}function t(e){const n=document.getElementById("modal-falla-"+e);n&&(n.style.display="none",document.body.style.overflow="",n._onEsc&&(document.removeEventListener("keydown",n._onEsc),delete n._onEsc))}console.log("APP BUILD: 2025-09-02-01"),setInterval(n,2e3),n(),window.abrirModalNotificaciones=e,window.cerrarModal=function(){const e=document.getElementById("modalNotificaciones");e&&(e.style.display="none")},window.marcarNotificacionesLeidas=function(){fetch("notificaciones.php?marcar=1").then(e=>e.json()).then(n=>{n&&n.success&&(e(),location.reload())}).catch(e=>console.error(e))},window.abrirModalFalla=function(e){const n=document.getElementById("modal-falla-"+e);if(!n)return;n.style.display="flex",document.body.style.overflow="hidden",n.addEventListener("click",function(o){o.target===n&&t(e)},{once:!0});const o=n=>{"Escape"===n.key&&t(e)};n._onEsc=o,document.addEventListener("keydown",o)},window.cerrarModalFalla=t})(),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".js-pdf-frame"),n=document.querySelector(".js-pdf-zoom-label"),t=document.querySelector(".js-pdf-zoom-in"),o=document.querySelector(".js-pdf-zoom-reset"),a=document.querySelector(".js-pdf-search-tip");if(!(e&&n&&t&&o))return;let i=1;function s(){e.style.transform=`scale(${i})`,e.style.transformOrigin="top center",n.textContent=`${Math.round(100*i)}%`}s(),t.addEventListener("click",()=>{i=Math.min(2,+(i+.1).toFixed(2)),s()}),o.addEventListener("click",()=>{i=1,s()}),document.addEventListener("keydown",e=>{const n=e.ctrlKey||e.metaKey;!n||"+"!==e.key&&"="!==e.key||(e.preventDefault(),i=Math.min(2,+(i+.1).toFixed(2)),s()),n&&"-"===e.key&&(e.preventDefault(),i=Math.max(.6,+(i-.1).toFixed(2)),s()),n&&"0"===e.key&&(e.preventDefault(),i=1,s())}),a&&a.addEventListener("click",()=>{alert("Tip: usa Ctrl + F (Cmd + F en Mac) para buscar dentro del documento.")})}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".js-card-link").forEach(e=>{const n=e.dataset.link;n&&(e.classList.add("admin-card--clickable"),e.addEventListener("click",()=>{window.location.href=n}))});const e=document.querySelector(".js-admin-search");e&&e.addEventListener("click",()=>{const e=window.prompt("Buscar tickets por título o descripción:");if(e&&""!==e.trim()){const n=encodeURIComponent(e.trim());window.location.href=`admin_tickets.php?q=${n}`}});const n=document.querySelector(".js-admin-bell"),t=document.querySelector(".js-notifications-wrapper");n&&t&&n.addEventListener("click",()=>{t.scrollIntoView({behavior:"smooth",block:"start"}),t.classList.add("admin-card--highlight"),setTimeout(()=>{t.classList.remove("admin-card--highlight")},1800)});const o=document.querySelector(".js-notifications-list");if(o){o.querySelectorAll(".admin-notifications__item").length>5&&o.classList.add("has-scroll")}}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("navToggle"),n=document.getElementById("mainNav");e&&n&&(e.addEventListener("click",()=>{const t=n.classList.toggle("open");e.setAttribute("aria-expanded",t?"true":"false")}),n.querySelectorAll("a").forEach(t=>{t.addEventListener("click",()=>{window.innerWidth<=900&&n.classList.contains("open")&&(n.classList.remove("open"),e.setAttribute("aria-expanded","false"))})}),window.addEventListener("resize",()=>{window.innerWidth>900&&n.classList.contains("open")&&(n.classList.remove("open"),e.setAttribute("aria-expanded","false"))}),document.addEventListener("keydown",t=>{"Escape"===t.key&&n.classList.contains("open")&&(n.classList.remove("open"),e.setAttribute("aria-expanded","false"))}))}),function(e,n){function t(e,n){return typeof e===n}function o(e){var n=l.className,t=c._config.classPrefix||"";if(A&&(n=n.baseVal),c._config.enableJSClass){var o=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");n=n.replace(o,"$1"+t+"js$2")}c._config.enableClasses&&(n+=" "+t+e.join(" "+t),A?l.className.baseVal=n:l.className=n)}function a(e,n){if("object"==typeof e)for(var t in e)d(e,t)&&a(t,e[t]);else{var i=(e=e.toLowerCase()).split("."),s=c[i[0]];if(2==i.length&&(s=s[i[1]]),void 0!==s)return c;n="function"==typeof n?n():n,1==i.length?c[i[0]]=n:(!c[i[0]]||c[i[0]]instanceof Boolean||(c[i[0]]=new Boolean(c[i[0]])),c[i[0]][i[1]]=n),o([(n&&0!=n?"":"no-")+i.join("-")]),c._trigger(e,n)}return c}var i=[],s=[],r={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,n){var t=this;setTimeout(function(){n(t[e])},0)},addTest:function(e,n,t){s.push({name:e,fn:n,options:t})},addAsyncTest:function(e){s.push({name:null,fn:e})}},c=function(){};c.prototype=r,c=new c;var d,l=n.documentElement,A="svg"===l.nodeName.toLowerCase();!function(){var e={}.hasOwnProperty;d=t(e,"undefined")||t(e.call,"undefined")?function(e,n){return n in e&&t(e.constructor.prototype[n],"undefined")}:function(n,t){return e.call(n,t)}}(),r._l={},r.on=function(e,n){this._l[e]||(this._l[e]=[]),this._l[e].push(n),c.hasOwnProperty(e)&&setTimeout(function(){c._trigger(e,c[e])},0)},r._trigger=function(e,n){if(this._l[e]){var t=this._l[e];setTimeout(function(){var e;for(e=0;e<t.length;e++)(0,t[e])(n)},0),delete this._l[e]}},c._q.push(function(){r.addTest=a}),c.addAsyncTest(function(){function e(e,n,t){function o(n){var o=!(!n||"load"!==n.type)&&1==i.width;a(e,"webp"===e&&o?new Boolean(o):o),t&&t(n)}var i=new Image;i.onerror=o,i.onload=o,i.src=n}var n=[{uri:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",name:"webp"},{uri:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",name:"webp.alpha"},{uri:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",name:"webp.animation"},{uri:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",name:"webp.lossless"}],t=n.shift();e(t.name,t.uri,function(t){if(t&&"load"===t.type)for(var o=0;o<n.length;o++)e(n[o].name,n[o].uri)})}),function(){var e,n,o,a,r,d;for(var l in s)if(s.hasOwnProperty(l)){if(e=[],(n=s[l]).name&&(e.push(n.name.toLowerCase()),n.options&&n.options.aliases&&n.options.aliases.length))for(o=0;o<n.options.aliases.length;o++)e.push(n.options.aliases[o].toLowerCase());for(a=t(n.fn,"function")?n.fn():n.fn,r=0;r<e.length;r++)1===(d=e[r].split(".")).length?c[d[0]]=a:(!c[d[0]]||c[d[0]]instanceof Boolean||(c[d[0]]=new Boolean(c[d[0]])),c[d[0]][d[1]]=a),i.push((a?"":"no-")+d.join("-"))}}(),o(i),delete r.addTest,delete r.addAsyncTest;for(var u=0;u<c._q.length;u++)c._q[u]();e.Modernizr=c}(window,document);
//# sourceMappingURL=bundle.js.map
